<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `import_codemap` fn in crate `rustc_metadata`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, import_codemap">

    <title>rustc_metadata::creader::import_codemap - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    <link rel="shortcut icon" href="https://doc.rust-lang.org/favicon.ico">
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <a href='../../rustc_metadata/index.html'><img src='https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png' alt='logo' width='100'></a>
        <p class='location'><a href='../index.html'>rustc_metadata</a>::<wbr><a href='index.html'>creader</a></p><script>window.sidebarCurrent = {name: 'import_codemap', ty: 'fn', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content fn">
<h1 class='fqn'><span class='in-band'>Function <a href='../index.html'>rustc_metadata</a>::<wbr><a href='index.html'>creader</a>::<wbr><a class='fn' href=''>import_codemap</a></span><span class='out-of-band'><span class='since' title='Stable since Rust version '></span><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-5030' class='srclink' href='../../src/rustc_metadata/src/librustc_metadata/creader.rs.html#1050-1154' title='goto source code'>[src]</a></span></h1>
<pre class='rust fn'>pub fn import_codemap(local_codemap: &amp;<a class='struct' href='../../syntax/codemap/struct.CodeMap.html' title='syntax::codemap::CodeMap'>CodeMap</a>, metadata: &amp;<a class='enum' href='../../rustc_metadata/cstore/enum.MetadataBlob.html' title='rustc_metadata::cstore::MetadataBlob'>MetadataBlob</a>) -&gt; <a class='struct' href='../../collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='../../rustc_metadata/cstore/struct.ImportedFileMap.html' title='rustc_metadata::cstore::ImportedFileMap'>ImportedFileMap</a>&gt;</pre><div class='stability'><em class='stab unstable'>Unstable (<code>rustc_private</code>)</em></div><div class='docblock'><p>Imports the codemap from an external crate into the codemap of the crate
currently being compiled (the &quot;local crate&quot;).</p>

<p>The import algorithm works analogous to how AST items are inlined from an
external crate&#39;s metadata:
For every FileMap in the external codemap an &#39;inline&#39; copy is created in the
local codemap. The correspondence relation between external and local
FileMaps is recorded in the <code>ImportedFileMap</code> objects returned from this
function. When an item from an external crate is later inlined into this
crate, this correspondence information is used to translate the span
information of the inlined item so that it refers the correct positions in
the local codemap (see <code>astencode::DecodeContext::tr_span()</code>).</p>

<p>The import algorithm in the function below will reuse FileMaps already
existing in the local codemap. For example, even if the FileMap of some
source file of libstd gets imported many times, there will only ever be
one FileMap object for the corresponding file in the local codemap.</p>

<p>Note that imported FileMaps do not actually contain the source code of the
file they represent, just information about length, line breaks, and
multibyte characters. This information is enough to generate valid debuginfo
for items inlined from other crates.</p>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "rustc_metadata";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>