<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Constructors</title>

    <link rel="stylesheet" type="text/css" href="rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ol class='chapter'>
<li><a  href='README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='meet-safe-and-unsafe.html'><b>2.</b> Meet Safe and Unsafe</a>
<ol class='section'>
<li><a  href='safe-unsafe-meaning.html'><b>2.1.</b> How Safe and Unsafe Interact</a>
</li>
<li><a  href='working-with-unsafe.html'><b>2.2.</b> Working with Unsafe</a>
</li>
</ol>
</li>
<li><a  href='data.html'><b>3.</b> Data Layout</a>
<ol class='section'>
<li><a  href='repr-rust.html'><b>3.1.</b> repr(Rust)</a>
</li>
<li><a  href='exotic-sizes.html'><b>3.2.</b> Exotically Sized Types</a>
</li>
<li><a  href='other-reprs.html'><b>3.3.</b> Other reprs</a>
</li>
</ol>
</li>
<li><a  href='ownership.html'><b>4.</b> Ownership</a>
<ol class='section'>
<li><a  href='references.html'><b>4.1.</b> References</a>
</li>
<li><a  href='lifetimes.html'><b>4.2.</b> Lifetimes</a>
</li>
<li><a  href='lifetime-mismatch.html'><b>4.3.</b> Limits of Lifetimes</a>
</li>
<li><a  href='lifetime-elision.html'><b>4.4.</b> Lifetime Elision</a>
</li>
<li><a  href='unbounded-lifetimes.html'><b>4.5.</b> Unbounded Lifetimes</a>
</li>
<li><a  href='hrtb.html'><b>4.6.</b> Higher-Rank Trait Bounds</a>
</li>
<li><a  href='subtyping.html'><b>4.7.</b> Subtyping and Variance</a>
</li>
<li><a  href='dropck.html'><b>4.8.</b> Drop Check</a>
</li>
<li><a  href='phantom-data.html'><b>4.9.</b> PhantomData</a>
</li>
<li><a  href='borrow-splitting.html'><b>4.10.</b> Splitting Borrows</a>
</li>
</ol>
</li>
<li><a  href='conversions.html'><b>5.</b> Type Conversions</a>
<ol class='section'>
<li><a  href='coercions.html'><b>5.1.</b> Coercions</a>
</li>
<li><a  href='dot-operator.html'><b>5.2.</b> The Dot Operator</a>
</li>
<li><a  href='casts.html'><b>5.3.</b> Casts</a>
</li>
<li><a  href='transmutes.html'><b>5.4.</b> Transmutes</a>
</li>
</ol>
</li>
<li><a  href='uninitialized.html'><b>6.</b> Uninitialized Memory</a>
<ol class='section'>
<li><a  href='checked-uninit.html'><b>6.1.</b> Checked</a>
</li>
<li><a  href='drop-flags.html'><b>6.2.</b> Drop Flags</a>
</li>
<li><a  href='unchecked-uninit.html'><b>6.3.</b> Unchecked</a>
</li>
</ol>
</li>
<li><a  href='obrm.html'><b>7.</b> Ownership Based Resource Management</a>
<ol class='section'>
<li><a class='active' href='constructors.html'><b>7.1.</b> Constructors</a>
</li>
<li><a  href='destructors.html'><b>7.2.</b> Destructors</a>
</li>
<li><a  href='leaking.html'><b>7.3.</b> Leaking</a>
</li>
</ol>
</li>
<li><a  href='unwinding.html'><b>8.</b> Unwinding</a>
<ol class='section'>
<li><a  href='exception-safety.html'><b>8.1.</b> Exception Safety</a>
</li>
<li><a  href='poisoning.html'><b>8.2.</b> Poisoning</a>
</li>
</ol>
</li>
<li><a  href='concurrency.html'><b>9.</b> Concurrency</a>
<ol class='section'>
<li><a  href='races.html'><b>9.1.</b> Races</a>
</li>
<li><a  href='send-and-sync.html'><b>9.2.</b> Send and Sync</a>
</li>
<li><a  href='atomics.html'><b>9.3.</b> Atomics</a>
</li>
</ol>
</li>
<li><a  href='vec.html'><b>10.</b> Implementing Vec</a>
<ol class='section'>
<li><a  href='vec-layout.html'><b>10.1.</b> Layout</a>
</li>
<li><a  href='vec-alloc.html'><b>10.2.</b> Allocating</a>
</li>
<li><a  href='vec-push-pop.html'><b>10.3.</b> Push and Pop</a>
</li>
<li><a  href='vec-dealloc.html'><b>10.4.</b> Deallocating</a>
</li>
<li><a  href='vec-deref.html'><b>10.5.</b> Deref</a>
</li>
<li><a  href='vec-insert-remove.html'><b>10.6.</b> Insert and Remove</a>
</li>
<li><a  href='vec-into-iter.html'><b>10.7.</b> IntoIter</a>
</li>
<li><a  href='vec-raw.html'><b>10.8.</b> RawVec</a>
</li>
<li><a  href='vec-drain.html'><b>10.9.</b> Drain</a>
</li>
<li><a  href='vec-zsts.html'><b>10.10.</b> Handling Zero-Sized Types</a>
</li>
<li><a  href='vec-final.html'><b>10.11.</b> Final Code</a>
</li>
</ol>
</li>
<li><a  href='arc-and-mutex.html'><b>11.</b> Implementing Arc and Mutex</a>
</li>
</ol>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">Constructors</h1>
    <p>There is exactly one way to create an instance of a user-defined type: name it,
and initialize all its fields at once:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>struct</span> <span class='ident'>Foo</span> {
    <span class='ident'>a</span>: <span class='ident'>u8</span>,
    <span class='ident'>b</span>: <span class='ident'>u32</span>,
    <span class='ident'>c</span>: <span class='ident'>bool</span>,
}

<span class='kw'>enum</span> <span class='ident'>Bar</span> {
    <span class='ident'>X</span>(<span class='ident'>u32</span>),
    <span class='ident'>Y</span>(<span class='ident'>bool</span>),
}

<span class='kw'>struct</span> <span class='ident'>Unit</span>;

<span class='kw'>let</span> <span class='ident'>foo</span> <span class='op'>=</span> <span class='ident'>Foo</span> { <span class='ident'>a</span>: <span class='number'>0</span>, <span class='ident'>b</span>: <span class='number'>1</span>, <span class='ident'>c</span>: <span class='bool-val'>false</span> };
<span class='kw'>let</span> <span class='ident'>bar</span> <span class='op'>=</span> <span class='ident'>Bar</span>::<span class='ident'>X</span>(<span class='number'>0</span>);
<span class='kw'>let</span> <span class='ident'>empty</span> <span class='op'>=</span> <span class='ident'>Unit</span>;<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Astruct%20Foo%20%7B%0A%20%20%20%20a%3A%20u8%2C%0A%20%20%20%20b%3A%20u32%2C%0A%20%20%20%20c%3A%20bool%2C%0A%7D%0A%0Aenum%20Bar%20%7B%0A%20%20%20%20X(u32)%2C%0A%20%20%20%20Y(bool)%2C%0A%7D%0A%0Astruct%20Unit%3B%0A%0Alet%20foo%20%3D%20Foo%20%7B%20a%3A%200%2C%20b%3A%201%2C%20c%3A%20false%20%7D%3B%0Alet%20bar%20%3D%20Bar%3A%3AX(0)%3B%0Alet%20empty%20%3D%20Unit%3B%0A%7D">Run</a></pre>

<p>That&#39;s it. Every other way you make an instance of a type is just calling a
totally vanilla function that does some stuff and eventually bottoms out to The
One True Constructor.</p>

<p>Unlike C++, Rust does not come with a slew of built-in kinds of constructor.
There are no Copy, Default, Assignment, Move, or whatever constructors. The
reasons for this are varied, but it largely boils down to Rust&#39;s philosophy of
<em>being explicit</em>.</p>

<p>Move constructors are meaningless in Rust because we don&#39;t enable types to
&quot;care&quot; about their location in memory. Every type must be ready for it to be
blindly memcopied to somewhere else in memory. This means pure on-the-stack-but-
still-movable intrusive linked lists are simply not happening in Rust (safely).</p>

<p>Assignment and copy constructors similarly don&#39;t exist because move semantics
are the only semantics in Rust. At most <code>x = y</code> just moves the bits of y into
the x variable. Rust does provide two facilities for providing C++&#39;s copy-
oriented semantics: <code>Copy</code> and <code>Clone</code>. Clone is our moral equivalent of a copy
constructor, but it&#39;s never implicitly invoked. You have to explicitly call
<code>clone</code> on an element you want to be cloned. Copy is a special case of Clone
where the implementation is just &quot;copy the bits&quot;. Copy types <em>are</em> implicitly
cloned whenever they&#39;re moved, but because of the definition of Copy this just
means not treating the old copy as uninitialized -- a no-op.</p>

<p>While Rust provides a <code>Default</code> trait for specifying the moral equivalent of a
default constructor, it&#39;s incredibly rare for this trait to be used. This is
because variables <a href="uninitialized.html">aren&#39;t implicitly initialized</a>. Default is basically
only useful for generic programming. In concrete contexts, a type will provide a
static <code>new</code> method for any kind of &quot;default&quot; constructor. This has no relation
to <code>new</code> in other languages and has no special meaning. It&#39;s just a naming
convention.</p>

<p>TODO: talk about &quot;placement new&quot;?</p>

    <script src='rustbook.js'></script>
</div></div>


</body>
</html>