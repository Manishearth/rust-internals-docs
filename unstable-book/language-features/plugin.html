<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>plugin - </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="../">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

        <!-- Custom JS script -->
        

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li class="affix"><a href="the-unstable-book.html">The Unstable Book</a></li><li><a href="compiler-flags.html"><strong>1.</strong> Compiler flags</a></li><li><ul class="section"><li><a href="compiler-flags/linker-flavor.html"><strong>1.1.</strong> linker_flavor</a></li><li><a href="compiler-flags/profile.html"><strong>1.2.</strong> profile</a></li><li><a href="compiler-flags/remap-path-prefix.html"><strong>1.3.</strong> remap_path_prefix</a></li></ul></li><li><a href="language-features.html"><strong>2.</strong> Language features</a></li><li><ul class="section"><li><a href="language-features/abi-msp430-interrupt.html"><strong>2.1.</strong> abi_msp430_interrupt</a></li><li><a href="language-features/abi-ptx.html"><strong>2.2.</strong> abi_ptx</a></li><li><a href="language-features/abi-sysv64.html"><strong>2.3.</strong> abi_sysv64</a></li><li><a href="language-features/abi-thiscall.html"><strong>2.4.</strong> abi_thiscall</a></li><li><a href="language-features/abi-unadjusted.html"><strong>2.5.</strong> abi_unadjusted</a></li><li><a href="language-features/abi-vectorcall.html"><strong>2.6.</strong> abi_vectorcall</a></li><li><a href="language-features/abi-x86-interrupt.html"><strong>2.7.</strong> abi_x86_interrupt</a></li><li><a href="language-features/advanced-slice-patterns.html"><strong>2.8.</strong> advanced_slice_patterns</a></li><li><a href="language-features/allocator-internals.html"><strong>2.9.</strong> allocator_internals</a></li><li><a href="language-features/allow-fail.html"><strong>2.10.</strong> allow_fail</a></li><li><a href="language-features/allow-internal-unsafe.html"><strong>2.11.</strong> allow_internal_unsafe</a></li><li><a href="language-features/allow-internal-unstable.html"><strong>2.12.</strong> allow_internal_unstable</a></li><li><a href="language-features/asm.html"><strong>2.13.</strong> asm</a></li><li><a href="language-features/associated-type-defaults.html"><strong>2.14.</strong> associated_type_defaults</a></li><li><a href="language-features/attr-literals.html"><strong>2.15.</strong> attr_literals</a></li><li><a href="language-features/box-patterns.html"><strong>2.16.</strong> box_patterns</a></li><li><a href="language-features/box-syntax.html"><strong>2.17.</strong> box_syntax</a></li><li><a href="language-features/catch-expr.html"><strong>2.18.</strong> catch_expr</a></li><li><a href="language-features/cfg-target-feature.html"><strong>2.19.</strong> cfg_target_feature</a></li><li><a href="language-features/cfg-target-has-atomic.html"><strong>2.20.</strong> cfg_target_has_atomic</a></li><li><a href="language-features/cfg-target-thread-local.html"><strong>2.21.</strong> cfg_target_thread_local</a></li><li><a href="language-features/cfg-target-vendor.html"><strong>2.22.</strong> cfg_target_vendor</a></li><li><a href="language-features/clone-closures.html"><strong>2.23.</strong> clone_closures</a></li><li><a href="language-features/compiler-builtins.html"><strong>2.24.</strong> compiler_builtins</a></li><li><a href="language-features/concat-idents.html"><strong>2.25.</strong> concat_idents</a></li><li><a href="language-features/conservative-impl-trait.html"><strong>2.26.</strong> conservative_impl_trait</a></li><li><a href="language-features/const-fn.html"><strong>2.27.</strong> const_fn</a></li><li><a href="language-features/const-indexing.html"><strong>2.28.</strong> const_indexing</a></li><li><a href="language-features/copy-closures.html"><strong>2.29.</strong> copy_closures</a></li><li><a href="language-features/custom-attribute.html"><strong>2.30.</strong> custom_attribute</a></li><li><a href="language-features/custom-derive.html"><strong>2.31.</strong> custom_derive</a></li><li><a href="language-features/decl-macro.html"><strong>2.32.</strong> decl_macro</a></li><li><a href="language-features/default-type-parameter-fallback.html"><strong>2.33.</strong> default_type_parameter_fallback</a></li><li><a href="language-features/doc-cfg.html"><strong>2.34.</strong> doc_cfg</a></li><li><a href="language-features/doc-masked.html"><strong>2.35.</strong> doc_masked</a></li><li><a href="language-features/dotdoteq-in-patterns.html"><strong>2.36.</strong> dotdoteq_in_patterns</a></li><li><a href="language-features/dropck-eyepatch.html"><strong>2.37.</strong> dropck_eyepatch</a></li><li><a href="language-features/dropck-parametricity.html"><strong>2.38.</strong> dropck_parametricity</a></li><li><a href="language-features/dyn-trait.html"><strong>2.39.</strong> dyn_trait</a></li><li><a href="language-features/exclusive-range-pattern.html"><strong>2.40.</strong> exclusive_range_pattern</a></li><li><a href="language-features/fn-must-use.html"><strong>2.41.</strong> fn_must_use</a></li><li><a href="language-features/fundamental.html"><strong>2.42.</strong> fundamental</a></li><li><a href="language-features/generators.html"><strong>2.43.</strong> generators</a></li><li><a href="language-features/generic-param-attrs.html"><strong>2.44.</strong> generic_param_attrs</a></li><li><a href="language-features/global-allocator.html"><strong>2.45.</strong> global_allocator</a></li><li><a href="language-features/global-asm.html"><strong>2.46.</strong> global_asm</a></li><li><a href="language-features/i128-type.html"><strong>2.47.</strong> i128_type</a></li><li><a href="language-features/inclusive-range-syntax.html"><strong>2.48.</strong> inclusive_range_syntax</a></li><li><a href="language-features/intrinsics.html"><strong>2.49.</strong> intrinsics</a></li><li><a href="language-features/lang-items.html"><strong>2.50.</strong> lang_items</a></li><li><a href="language-features/link-args.html"><strong>2.51.</strong> link_args</a></li><li><a href="language-features/link-cfg.html"><strong>2.52.</strong> link_cfg</a></li><li><a href="language-features/link-llvm-intrinsics.html"><strong>2.53.</strong> link_llvm_intrinsics</a></li><li><a href="language-features/linkage.html"><strong>2.54.</strong> linkage</a></li><li><a href="language-features/log-syntax.html"><strong>2.55.</strong> log_syntax</a></li><li><a href="language-features/macro-reexport.html"><strong>2.56.</strong> macro_reexport</a></li><li><a href="language-features/macro-vis-matcher.html"><strong>2.57.</strong> macro_vis_matcher</a></li><li><a href="language-features/main.html"><strong>2.58.</strong> main</a></li><li><a href="language-features/match-beginning-vert.html"><strong>2.59.</strong> match_beginning_vert</a></li><li><a href="language-features/match-default-bindings.html"><strong>2.60.</strong> match_default_bindings</a></li><li><a href="language-features/naked-functions.html"><strong>2.61.</strong> naked_functions</a></li><li><a href="language-features/needs-allocator.html"><strong>2.62.</strong> needs_allocator</a></li><li><a href="language-features/needs-panic-runtime.html"><strong>2.63.</strong> needs_panic_runtime</a></li><li><a href="language-features/never-type.html"><strong>2.64.</strong> never_type</a></li><li><a href="language-features/no-core.html"><strong>2.65.</strong> no_core</a></li><li><a href="language-features/no-debug.html"><strong>2.66.</strong> no_debug</a></li><li><a href="language-features/non-ascii-idents.html"><strong>2.67.</strong> non_ascii_idents</a></li><li><a href="language-features/omit-gdb-pretty-printer-section.html"><strong>2.68.</strong> omit_gdb_pretty_printer_section</a></li><li><a href="language-features/on-unimplemented.html"><strong>2.69.</strong> on_unimplemented</a></li><li><a href="language-features/optin-builtin-traits.html"><strong>2.70.</strong> optin_builtin_traits</a></li><li><a href="language-features/overlapping-marker-traits.html"><strong>2.71.</strong> overlapping_marker_traits</a></li><li><a href="language-features/panic-runtime.html"><strong>2.72.</strong> panic_runtime</a></li><li><a href="language-features/placement-in-syntax.html"><strong>2.73.</strong> placement_in_syntax</a></li><li><a href="language-features/platform-intrinsics.html"><strong>2.74.</strong> platform_intrinsics</a></li><li><a href="language-features/plugin.html" class="active"><strong>2.75.</strong> plugin</a></li><li><a href="language-features/plugin-registrar.html"><strong>2.76.</strong> plugin_registrar</a></li><li><a href="language-features/prelude-import.html"><strong>2.77.</strong> prelude_import</a></li><li><a href="language-features/proc-macro.html"><strong>2.78.</strong> proc_macro</a></li><li><a href="language-features/profiler-runtime.html"><strong>2.79.</strong> profiler_runtime</a></li><li><a href="language-features/quote.html"><strong>2.80.</strong> quote</a></li><li><a href="language-features/repr128.html"><strong>2.81.</strong> repr128</a></li><li><a href="language-features/repr-align.html"><strong>2.82.</strong> repr_align</a></li><li><a href="language-features/repr-simd.html"><strong>2.83.</strong> repr_simd</a></li><li><a href="language-features/rustc-attrs.html"><strong>2.84.</strong> rustc_attrs</a></li><li><a href="language-features/rustc-const-unstable.html"><strong>2.85.</strong> rustc_const_unstable</a></li><li><a href="language-features/rustc-diagnostic-macros.html"><strong>2.86.</strong> rustc_diagnostic_macros</a></li><li><a href="language-features/sanitizer-runtime.html"><strong>2.87.</strong> sanitizer_runtime</a></li><li><a href="language-features/simd.html"><strong>2.88.</strong> simd</a></li><li><a href="language-features/simd-ffi.html"><strong>2.89.</strong> simd_ffi</a></li><li><a href="language-features/slice-patterns.html"><strong>2.90.</strong> slice_patterns</a></li><li><a href="language-features/specialization.html"><strong>2.91.</strong> specialization</a></li><li><a href="language-features/staged-api.html"><strong>2.92.</strong> staged_api</a></li><li><a href="language-features/start.html"><strong>2.93.</strong> start</a></li><li><a href="language-features/static-nobundle.html"><strong>2.94.</strong> static_nobundle</a></li><li><a href="language-features/stmt-expr-attributes.html"><strong>2.95.</strong> stmt_expr_attributes</a></li><li><a href="language-features/structural-match.html"><strong>2.96.</strong> structural_match</a></li><li><a href="language-features/target-feature.html"><strong>2.97.</strong> target_feature</a></li><li><a href="language-features/thread-local.html"><strong>2.98.</strong> thread_local</a></li><li><a href="language-features/trace-macros.html"><strong>2.99.</strong> trace_macros</a></li><li><a href="language-features/type-ascription.html"><strong>2.100.</strong> type_ascription</a></li><li><a href="language-features/unboxed-closures.html"><strong>2.101.</strong> unboxed_closures</a></li><li><a href="language-features/underscore-lifetimes.html"><strong>2.102.</strong> underscore_lifetimes</a></li><li><a href="language-features/unsized-tuple-coercion.html"><strong>2.103.</strong> unsized_tuple_coercion</a></li><li><a href="language-features/untagged-unions.html"><strong>2.104.</strong> untagged_unions</a></li><li><a href="language-features/unwind-attributes.html"><strong>2.105.</strong> unwind_attributes</a></li><li><a href="language-features/use-extern-macros.html"><strong>2.106.</strong> use_extern_macros</a></li><li><a href="language-features/used.html"><strong>2.107.</strong> used</a></li></ul></li><li><a href="library-features.html"><strong>3.</strong> Library Features</a></li><li><ul class="section"><li><a href="library-features/align-offset.html"><strong>3.1.</strong> align_offset</a></li><li><a href="library-features/alloc.html"><strong>3.2.</strong> alloc</a></li><li><a href="library-features/alloc-jemalloc.html"><strong>3.3.</strong> alloc_jemalloc</a></li><li><a href="library-features/alloc-system.html"><strong>3.4.</strong> alloc_system</a></li><li><a href="library-features/allocator-api.html"><strong>3.5.</strong> allocator_api</a></li><li><a href="library-features/ascii-ctype.html"><strong>3.6.</strong> ascii_ctype</a></li><li><a href="library-features/box-heap.html"><strong>3.7.</strong> box_heap</a></li><li><a href="library-features/c-void-variant.html"><strong>3.8.</strong> c_void_variant</a></li><li><a href="library-features/char-error-internals.html"><strong>3.9.</strong> char_error_internals</a></li><li><a href="library-features/coerce-unsized.html"><strong>3.10.</strong> coerce_unsized</a></li><li><a href="library-features/collection-placement.html"><strong>3.11.</strong> collection_placement</a></li><li><a href="library-features/collections.html"><strong>3.12.</strong> collections</a></li><li><a href="library-features/collections-range.html"><strong>3.13.</strong> collections_range</a></li><li><a href="library-features/compiler-builtins-lib.html"><strong>3.14.</strong> compiler_builtins_lib</a></li><li><a href="library-features/concat-idents-macro.html"><strong>3.15.</strong> concat_idents_macro</a></li><li><a href="library-features/core-char-ext.html"><strong>3.16.</strong> core_char_ext</a></li><li><a href="library-features/core-float.html"><strong>3.17.</strong> core_float</a></li><li><a href="library-features/core-intrinsics.html"><strong>3.18.</strong> core_intrinsics</a></li><li><a href="library-features/core-panic.html"><strong>3.19.</strong> core_panic</a></li><li><a href="library-features/core-private-bignum.html"><strong>3.20.</strong> core_private_bignum</a></li><li><a href="library-features/core-private-diy-float.html"><strong>3.21.</strong> core_private_diy_float</a></li><li><a href="library-features/core-slice-ext.html"><strong>3.22.</strong> core_slice_ext</a></li><li><a href="library-features/core-str-ext.html"><strong>3.23.</strong> core_str_ext</a></li><li><a href="library-features/dec2flt.html"><strong>3.24.</strong> dec2flt</a></li><li><a href="library-features/decode-utf8.html"><strong>3.25.</strong> decode_utf8</a></li><li><a href="library-features/derive-clone-copy.html"><strong>3.26.</strong> derive_clone_copy</a></li><li><a href="library-features/derive-eq.html"><strong>3.27.</strong> derive_eq</a></li><li><a href="library-features/drain-filter.html"><strong>3.28.</strong> drain_filter</a></li><li><a href="library-features/duration-from-micros.html"><strong>3.29.</strong> duration_from_micros</a></li><li><a href="library-features/entry-and-modify.html"><strong>3.30.</strong> entry_and_modify</a></li><li><a href="library-features/entry-or-default.html"><strong>3.31.</strong> entry_or_default</a></li><li><a href="library-features/error-type-id.html"><strong>3.32.</strong> error_type_id</a></li><li><a href="library-features/exact-size-is-empty.html"><strong>3.33.</strong> exact_size_is_empty</a></li><li><a href="library-features/fd.html"><strong>3.34.</strong> fd</a></li><li><a href="library-features/fd-read.html"><strong>3.35.</strong> fd_read</a></li><li><a href="library-features/fixed-size-array.html"><strong>3.36.</strong> fixed_size_array</a></li><li><a href="library-features/flt2dec.html"><strong>3.37.</strong> flt2dec</a></li><li><a href="library-features/fmt-flags-align.html"><strong>3.38.</strong> fmt_flags_align</a></li><li><a href="library-features/fmt-internals.html"><strong>3.39.</strong> fmt_internals</a></li><li><a href="library-features/fn-traits.html"><strong>3.40.</strong> fn_traits</a></li><li><a href="library-features/fnbox.html"><strong>3.41.</strong> fnbox</a></li><li><a href="library-features/from-utf8-error-as-bytes.html"><strong>3.42.</strong> from_utf8_error_as_bytes</a></li><li><a href="library-features/fused.html"><strong>3.43.</strong> fused</a></li><li><a href="library-features/future-atomic-orderings.html"><strong>3.44.</strong> future_atomic_orderings</a></li><li><a href="library-features/generator-trait.html"><strong>3.45.</strong> generator_trait</a></li><li><a href="library-features/get-type-id.html"><strong>3.46.</strong> get_type_id</a></li><li><a href="library-features/heap-api.html"><strong>3.47.</strong> heap_api</a></li><li><a href="library-features/hint-core-should-pause.html"><strong>3.48.</strong> hint_core_should_pause</a></li><li><a href="library-features/i128.html"><strong>3.49.</strong> i128</a></li><li><a href="library-features/inclusive-range.html"><strong>3.50.</strong> inclusive_range</a></li><li><a href="library-features/int-error-internals.html"><strong>3.51.</strong> int_error_internals</a></li><li><a href="library-features/integer-atomics.html"><strong>3.52.</strong> integer_atomics</a></li><li><a href="library-features/io.html"><strong>3.53.</strong> io</a></li><li><a href="library-features/io-error-internals.html"><strong>3.54.</strong> io_error_internals</a></li><li><a href="library-features/ip.html"><strong>3.55.</strong> ip</a></li><li><a href="library-features/ip-constructors.html"><strong>3.56.</strong> ip_constructors</a></li><li><a href="library-features/iter-rfind.html"><strong>3.57.</strong> iter_rfind</a></li><li><a href="library-features/iter-rfold.html"><strong>3.58.</strong> iter_rfold</a></li><li><a href="library-features/iterator-step-by.html"><strong>3.59.</strong> iterator_step_by</a></li><li><a href="library-features/libstd-io-internals.html"><strong>3.60.</strong> libstd_io_internals</a></li><li><a href="library-features/libstd-sys-internals.html"><strong>3.61.</strong> libstd_sys_internals</a></li><li><a href="library-features/libstd-thread-internals.html"><strong>3.62.</strong> libstd_thread_internals</a></li><li><a href="library-features/linked-list-extras.html"><strong>3.63.</strong> linked_list_extras</a></li><li><a href="library-features/lookup-host.html"><strong>3.64.</strong> lookup_host</a></li><li><a href="library-features/map-entry-replace.html"><strong>3.65.</strong> map_entry_replace</a></li><li><a href="library-features/mpsc-select.html"><strong>3.66.</strong> mpsc_select</a></li><li><a href="library-features/n16.html"><strong>3.67.</strong> n16</a></li><li><a href="library-features/never-type-impls.html"><strong>3.68.</strong> never_type_impls</a></li><li><a href="library-features/nonzero.html"><strong>3.69.</strong> nonzero</a></li><li><a href="library-features/offset-to.html"><strong>3.70.</strong> offset_to</a></li><li><a href="library-features/once-poison.html"><strong>3.71.</strong> once_poison</a></li><li><a href="library-features/option-ref-mut-cloned.html"><strong>3.72.</strong> option_ref_mut_cloned</a></li><li><a href="library-features/panic-abort.html"><strong>3.73.</strong> panic_abort</a></li><li><a href="library-features/panic-col.html"><strong>3.74.</strong> panic_col</a></li><li><a href="library-features/panic-unwind.html"><strong>3.75.</strong> panic_unwind</a></li><li><a href="library-features/pattern.html"><strong>3.76.</strong> pattern</a></li><li><a href="library-features/placement-in.html"><strong>3.77.</strong> placement_in</a></li><li><a href="library-features/placement-new-protocol.html"><strong>3.78.</strong> placement_new_protocol</a></li><li><a href="library-features/pointer-methods.html"><strong>3.79.</strong> pointer_methods</a></li><li><a href="library-features/print-internals.html"><strong>3.80.</strong> print_internals</a></li><li><a href="library-features/proc-macro.html"><strong>3.81.</strong> proc_macro</a></li><li><a href="library-features/proc-macro-internals.html"><strong>3.82.</strong> proc_macro_internals</a></li><li><a href="library-features/profiler-runtime-lib.html"><strong>3.83.</strong> profiler_runtime_lib</a></li><li><a href="library-features/rand.html"><strong>3.84.</strong> rand</a></li><li><a href="library-features/range-contains.html"><strong>3.85.</strong> range_contains</a></li><li><a href="library-features/raw.html"><strong>3.86.</strong> raw</a></li><li><a href="library-features/rc-downcast.html"><strong>3.87.</strong> rc_downcast</a></li><li><a href="library-features/read-initializer.html"><strong>3.88.</strong> read_initializer</a></li><li><a href="library-features/refcell-replace-swap.html"><strong>3.89.</strong> refcell_replace_swap</a></li><li><a href="library-features/rt.html"><strong>3.90.</strong> rt</a></li><li><a href="library-features/rustc-private.html"><strong>3.91.</strong> rustc_private</a></li><li><a href="library-features/sanitizer-runtime-lib.html"><strong>3.92.</strong> sanitizer_runtime_lib</a></li><li><a href="library-features/set-stdio.html"><strong>3.93.</strong> set_stdio</a></li><li><a href="library-features/shared.html"><strong>3.94.</strong> shared</a></li><li><a href="library-features/sip-hash-13.html"><strong>3.95.</strong> sip_hash_13</a></li><li><a href="library-features/slice-concat-ext.html"><strong>3.96.</strong> slice_concat_ext</a></li><li><a href="library-features/slice-get-slice.html"><strong>3.97.</strong> slice_get_slice</a></li><li><a href="library-features/slice-rotate.html"><strong>3.98.</strong> slice_rotate</a></li><li><a href="library-features/slice-rsplit.html"><strong>3.99.</strong> slice_rsplit</a></li><li><a href="library-features/sort-internals.html"><strong>3.100.</strong> sort_internals</a></li><li><a href="library-features/splice.html"><strong>3.101.</strong> splice</a></li><li><a href="library-features/step-trait.html"><strong>3.102.</strong> step_trait</a></li><li><a href="library-features/str-escape.html"><strong>3.103.</strong> str_escape</a></li><li><a href="library-features/str-internals.html"><strong>3.104.</strong> str_internals</a></li><li><a href="library-features/string-retain.html"><strong>3.105.</strong> string_retain</a></li><li><a href="library-features/swap-nonoverlapping.html"><strong>3.106.</strong> swap_nonoverlapping</a></li><li><a href="library-features/swap-with-slice.html"><strong>3.107.</strong> swap_with_slice</a></li><li><a href="library-features/take-set-limit.html"><strong>3.108.</strong> take_set_limit</a></li><li><a href="library-features/test.html"><strong>3.109.</strong> test</a></li><li><a href="library-features/thread-local-internals.html"><strong>3.110.</strong> thread_local_internals</a></li><li><a href="library-features/thread-local-state.html"><strong>3.111.</strong> thread_local_state</a></li><li><a href="library-features/toowned-clone-into.html"><strong>3.112.</strong> toowned_clone_into</a></li><li><a href="library-features/trusted-len.html"><strong>3.113.</strong> trusted_len</a></li><li><a href="library-features/try-from.html"><strong>3.114.</strong> try_from</a></li><li><a href="library-features/try-trait.html"><strong>3.115.</strong> try_trait</a></li><li><a href="library-features/unicode.html"><strong>3.116.</strong> unicode</a></li><li><a href="library-features/unique.html"><strong>3.117.</strong> unique</a></li><li><a href="library-features/unreachable.html"><strong>3.118.</strong> unreachable</a></li><li><a href="library-features/unsize.html"><strong>3.119.</strong> unsize</a></li><li><a href="library-features/update-panic-count.html"><strong>3.120.</strong> update_panic_count</a></li><li><a href="library-features/vec-remove-item.html"><strong>3.121.</strong> vec_remove_item</a></li><li><a href="library-features/vec-resize-default.html"><strong>3.122.</strong> vec_resize_default</a></li><li><a href="library-features/windows-c.html"><strong>3.123.</strong> windows_c</a></li><li><a href="library-features/windows-handle.html"><strong>3.124.</strong> windows_handle</a></li><li><a href="library-features/windows-net.html"><strong>3.125.</strong> windows_net</a></li><li><a href="library-features/windows-stdio.html"><strong>3.126.</strong> windows_stdio</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush"></i>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="language-features/plugin.html#plugin" id="plugin"><h1><code>plugin</code></h1></a>
<p>The tracking issue for this feature is: <a href="https://github.com/rust-lang/rust/issues/29597">#29597</a></p>
<p>This feature is part of &quot;compiler plugins.&quot; It will often be used with the
<a href="language-features/plugin-registrar.html"><code>plugin_registrar</code></a> and <code>rustc_private</code> features.</p>
<hr />
<p><code>rustc</code> can load compiler plugins, which are user-provided libraries that
extend the compiler's behavior with new syntax extensions, lint checks, etc.</p>
<p>A plugin is a dynamic library crate with a designated <em>registrar</em> function that
registers extensions with <code>rustc</code>. Other crates can load these extensions using
the crate attribute <code>#![plugin(...)]</code>.  See the
<code>rustc_plugin</code> documentation for more about the
mechanics of defining and loading a plugin.</p>
<p>If present, arguments passed as <code>#![plugin(foo(... args ...))]</code> are not
interpreted by rustc itself.  They are provided to the plugin through the
<code>Registry</code>'s <code>args</code> method.</p>
<p>In the vast majority of cases, a plugin should <em>only</em> be used through
<code>#![plugin]</code> and not through an <code>extern crate</code> item.  Linking a plugin would
pull in all of libsyntax and librustc as dependencies of your crate.  This is
generally unwanted unless you are building another plugin.  The
<code>plugin_as_library</code> lint checks these guidelines.</p>
<p>The usual practice is to put compiler plugins in their own crate, separate from
any <code>macro_rules!</code> macros or ordinary Rust code meant to be used by consumers
of a library.</p>
<a class="header" href="language-features/plugin.html#syntax-extensions" id="syntax-extensions"><h1>Syntax extensions</h1></a>
<p>Plugins can extend Rust's syntax in various ways. One kind of syntax extension
is the procedural macro. These are invoked the same way as <a href="../book/macros.html">ordinary
macros</a>, but the expansion is performed by arbitrary Rust
code that manipulates syntax trees at
compile time.</p>
<p>Let's write a plugin
<a href="https://github.com/rust-lang/rust/blob/master/src/test/run-pass-fulldeps/auxiliary/roman_numerals.rs"><code>roman_numerals.rs</code></a>
that implements Roman numeral integer literals.</p>
<pre><code class="language-rust ignore">#![crate_type=&quot;dylib&quot;]
#![feature(plugin_registrar, rustc_private)]

extern crate syntax;
extern crate rustc;
extern crate rustc_plugin;

use syntax::parse::token;
use syntax::tokenstream::TokenTree;
use syntax::ext::base::{ExtCtxt, MacResult, DummyResult, MacEager};
use syntax::ext::build::AstBuilder;  // A trait for expr_usize.
use syntax::ext::quote::rt::Span;
use rustc_plugin::Registry;

fn expand_rn(cx: &amp;mut ExtCtxt, sp: Span, args: &amp;[TokenTree])
        -&gt; Box&lt;MacResult + 'static&gt; {

    static NUMERALS: &amp;'static [(&amp;'static str, usize)] = &amp;[
        (&quot;M&quot;, 1000), (&quot;CM&quot;, 900), (&quot;D&quot;, 500), (&quot;CD&quot;, 400),
        (&quot;C&quot;,  100), (&quot;XC&quot;,  90), (&quot;L&quot;,  50), (&quot;XL&quot;,  40),
        (&quot;X&quot;,   10), (&quot;IX&quot;,   9), (&quot;V&quot;,   5), (&quot;IV&quot;,   4),
        (&quot;I&quot;,    1)];

    if args.len() != 1 {
        cx.span_err(
            sp,
            &amp;format!(&quot;argument should be a single identifier, but got {} arguments&quot;, args.len()));
        return DummyResult::any(sp);
    }

    let text = match args[0] {
        TokenTree::Token(_, token::Ident(s)) =&gt; s.to_string(),
        _ =&gt; {
            cx.span_err(sp, &quot;argument should be a single identifier&quot;);
            return DummyResult::any(sp);
        }
    };

    let mut text = &amp;*text;
    let mut total = 0;
    while !text.is_empty() {
        match NUMERALS.iter().find(|&amp;&amp;(rn, _)| text.starts_with(rn)) {
            Some(&amp;(rn, val)) =&gt; {
                total += val;
                text = &amp;text[rn.len()..];
            }
            None =&gt; {
                cx.span_err(sp, &quot;invalid Roman numeral&quot;);
                return DummyResult::any(sp);
            }
        }
    }

    MacEager::expr(cx.expr_usize(sp, total))
}

#[plugin_registrar]
pub fn plugin_registrar(reg: &amp;mut Registry) {
    reg.register_macro(&quot;rn&quot;, expand_rn);
}
</code></pre>
<p>Then we can use <code>rn!()</code> like any other macro:</p>
<pre><code class="language-rust ignore">#![feature(plugin)]
#![plugin(roman_numerals)]

fn main() {
    assert_eq!(rn!(MMXV), 2015);
}
</code></pre>
<p>The advantages over a simple <code>fn(&amp;str) -&gt; u32</code> are:</p>
<ul>
<li>The (arbitrarily complex) conversion is done at compile time.</li>
<li>Input validation is also performed at compile time.</li>
<li>It can be extended to allow use in patterns, which effectively gives
a way to define new literal syntax for any data type.</li>
</ul>
<p>In addition to procedural macros, you can define new
<a href="../reference/attributes.html#derive"><code>derive</code></a>-like attributes and other kinds
of extensions.  See <code>Registry::register_syntax_extension</code> and the
<code>SyntaxExtension</code> enum.  For a more involved macro example, see
<a href="https://github.com/rust-lang/regex/blob/master/regex_macros/src/lib.rs"><code>regex_macros</code></a>.</p>
<a class="header" href="language-features/plugin.html#tips-and-tricks" id="tips-and-tricks"><h2>Tips and tricks</h2></a>
<p>Some of the <a href="../book/first-edition/macros.html#debugging-macro-code">macro debugging tips</a> are applicable.</p>
<p>You can use <code>syntax::parse</code> to turn token trees into
higher-level syntax elements like expressions:</p>
<pre><code class="language-rust ignore">fn expand_foo(cx: &amp;mut ExtCtxt, sp: Span, args: &amp;[TokenTree])
        -&gt; Box&lt;MacResult+'static&gt; {

    let mut parser = cx.new_parser_from_tts(args);

    let expr: P&lt;Expr&gt; = parser.parse_expr();
</code></pre>
<p>Looking through <a href="https://github.com/rust-lang/rust/blob/master/src/libsyntax/parse/parser.rs"><code>libsyntax</code> parser
code</a>
will give you a feel for how the parsing infrastructure works.</p>
<p>Keep the <code>Span</code>s of everything you parse, for better error reporting. You can
wrap <code>Spanned</code> around your custom data structures.</p>
<p>Calling <code>ExtCtxt::span_fatal</code> will immediately abort compilation. It's better to
instead call <code>ExtCtxt::span_err</code> and return <code>DummyResult</code> so that the compiler
can continue and find further errors.</p>
<p>To print syntax fragments for debugging, you can use <code>span_note</code> together with
<code>syntax::print::pprust::*_to_string</code>.</p>
<p>The example above produced an integer literal using <code>AstBuilder::expr_usize</code>.
As an alternative to the <code>AstBuilder</code> trait, <code>libsyntax</code> provides a set of
quasiquote macros. They are undocumented and very rough around the edges.
However, the implementation may be a good starting point for an improved
quasiquote as an ordinary plugin library.</p>
<a class="header" href="language-features/plugin.html#lint-plugins" id="lint-plugins"><h1>Lint plugins</h1></a>
<p>Plugins can extend <a href="../reference/attributes.html#lint-check-attributes">Rust's lint
infrastructure</a> with
additional checks for code style, safety, etc. Now let's write a plugin
<a href="https://github.com/rust-lang/rust/blob/master/src/test/run-pass-fulldeps/auxiliary/lint_plugin_test.rs"><code>lint_plugin_test.rs</code></a>
that warns about any item named <code>lintme</code>.</p>
<pre><code class="language-rust ignore">#![feature(plugin_registrar)]
#![feature(box_syntax, rustc_private)]

extern crate syntax;

// Load rustc as a plugin to get macros
#[macro_use]
extern crate rustc;
extern crate rustc_plugin;

use rustc::lint::{EarlyContext, LintContext, LintPass, EarlyLintPass,
                  EarlyLintPassObject, LintArray};
use rustc_plugin::Registry;
use syntax::ast;

declare_lint!(TEST_LINT, Warn, &quot;Warn about items named 'lintme'&quot;);

struct Pass;

impl LintPass for Pass {
    fn get_lints(&amp;self) -&gt; LintArray {
        lint_array!(TEST_LINT)
    }
}

impl EarlyLintPass for Pass {
    fn check_item(&amp;mut self, cx: &amp;EarlyContext, it: &amp;ast::Item) {
        if it.ident.name.as_str() == &quot;lintme&quot; {
            cx.span_lint(TEST_LINT, it.span, &quot;item is named 'lintme'&quot;);
        }
    }
}

#[plugin_registrar]
pub fn plugin_registrar(reg: &amp;mut Registry) {
    reg.register_early_lint_pass(box Pass as EarlyLintPassObject);
}
</code></pre>
<p>Then code like</p>
<pre><code class="language-rust ignore">#![plugin(lint_plugin_test)]

fn lintme() { }
</code></pre>
<p>will produce a compiler warning:</p>
<pre><code class="language-txt">foo.rs:4:1: 4:16 warning: item is named 'lintme', #[warn(test_lint)] on by default
foo.rs:4 fn lintme() { }
         ^~~~~~~~~~~~~~~
</code></pre>
<p>The components of a lint plugin are:</p>
<ul>
<li>
<p>one or more <code>declare_lint!</code> invocations, which define static <code>Lint</code> structs;</p>
</li>
<li>
<p>a struct holding any state needed by the lint pass (here, none);</p>
</li>
<li>
<p>a <code>LintPass</code>
implementation defining how to check each syntax element. A single
<code>LintPass</code> may call <code>span_lint</code> for several different <code>Lint</code>s, but should
register them all through the <code>get_lints</code> method.</p>
</li>
</ul>
<p>Lint passes are syntax traversals, but they run at a late stage of compilation
where type information is available. <code>rustc</code>'s <a href="https://github.com/rust-lang/rust/blob/master/src/librustc/lint/builtin.rs">built-in
lints</a>
mostly use the same infrastructure as lint plugins, and provide examples of how
to access type information.</p>
<p>Lints defined by plugins are controlled by the usual <a href="../reference/attributes.html#lint-check-attributes">attributes and compiler
flags</a>, e.g.
<code>#[allow(test_lint)]</code> or <code>-A test-lint</code>. These identifiers are derived from the
first argument to <code>declare_lint!</code>, with appropriate case and punctuation
conversion.</p>
<p>You can run <code>rustc -W help foo.rs</code> to see a list of lints known to <code>rustc</code>,
including those provided by plugins loaded by <code>foo.rs</code>.</p>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="language-features/platform-intrinsics.html" class="mobile-nav-chapters previous">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="language-features/plugin-registrar.html" class="mobile-nav-chapters next">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="language-features/platform-intrinsics.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="language-features/plugin-registrar.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>
    </body>
</html>
